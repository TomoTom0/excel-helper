# ナンバリング行変換機能 - 詳細仕様

## 日時
2025-10-25

## 機能概要
TSV/CSVデータ内の改行を含む要素から、ナンバリング行を検出して番号を振り直す機能。

## 主要仕様

### 入力
- **データ形式**: TSV または CSV
- **区切り文字**: 自動判別を含める
- **要素**: 各要素はダブルクォーテーションまたはシングルクォーテーションで囲まれる（改行を含むため）

### ナンバリング行の定義
以下のいずれかで始まる行を「ナンバリング行」と呼ぶ:
1. **丸数字**: ①, ②, ③...
2. **数字とドット**: 1., 2., 3...
3. **括弧囲み数字**: (1), (2), (3)...
4. **指定したダミー文字**: デフォルトは "x"（ユーザーが指定可能）
5. **全角数字対応**: 将来的に追加予定

### 検出対象パターン（デフォルト）
- ダミー文字（x）
- 丸数字（①②③...）

### 処理ロジック
1. 各要素内の各行を走査
2. ナンバリング行を検出（指定した形式に一致する場合のみ）
3. 各要素内でのナンバリング行の出現順序を計算（何番目のナンバリング行か）
4. 元の判定要素（丸数字やx）を削除
5. 対応する数字を指定した出力形式で記載

**重要**: 先頭数字部分は指定した形式（複数指定可能）に含まれる場合のみ削除する

### 検出対象と出力形式の関係
- **検出対象**: ナンバリング行を見つけるためのパターン
- **出力形式**: 検出したナンバリング行を置き換える形式
- 両者は一致する必要はない（検出対象≠出力形式も可能）

## UI仕様

### レイアウト構成
- 固定長変換ページとは異なる専用レイアウト
- シンプルで分かりやすい構成

### 入力セクション
1. **データ入力欄**: 複数行テキストエリア（TSV/CSV貼り付け用）
2. **区切り文字**: 自動判別を含む選択肢
3. **検出対象パターン**: 
   - チェックボックス形式
   - デフォルト選択: ダミー文字 + 丸数字
   - 各パターンの右に具体例を表示（例: `丸数字 ①この操作では、`）
   - 「括弧と例」という表記は不要。直接具体例のみ表示
4. **ダミー文字入力欄**: 
   - デフォルト値: "x"
   - ダミー文字の選択肢の右に配置

### 出力セクション
1. **変換結果表示欄**: 複数行テキストエリア（読み取り専用）
2. **出力形式選択**: 指定した形式（丸数字、数字+ドット等）
3. **出力区切り文字選択**: TSV または CSV
4. **アクションボタン**:
   - コピーボタン
   - ダウンロードボタン

### スタイル注意点
- 出力形式などの部分で文字が多すぎてスタイルが乱れないよう調整
- レイアウトを意識した設計

## 実装アプローチ
- TDD（テスト駆動開発）で進める
- 段階的な機能追加

## 確認事項
- 検出対象と変換対象は一致する
- 検出対象と出力形式は一致するとは限らない
- ユーザーが確認できるUI設計が必要
