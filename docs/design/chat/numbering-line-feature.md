# ナンバリング行変換機能 設計書

## 機能概要

TSV/CSVデータの各要素内で、ナンバリング行を検出し、連番を振り直す機能。

## 詳細仕様

### 入力データ形式
- **区切り文字**: TSVまたはCSV（自動判別も含める）
- **要素の形式**: 改行を含む要素はダブルクォーテーションまたはシングルクォーテーションで囲まれる
- 各要素は複数行を含みうる

### ナンバリング行の定義
各要素内の行のうち、以下の条件を満たす行を「ナンバリング行」と呼ぶ：

**検出対象パターン（デフォルト）**:
1. **丸数字**: ①、②、③...（全角）
2. **ダミー文字**: x（デフォルト、ユーザー指定可能）

**検出対象パターン（後で追加予定）**:
- 数字とドット: 1. 2. 3...
- 括弧囲み数字: (1) (2) (3)...
- 全角数字のバリエーション

### 処理内容
1. 各要素内のナンバリング行を検出
2. 各ナンバリング行が何番目のナンバリング行かを計算
3. 元の判定要素（丸数字やダミー文字など）を削除
4. 対応する番号を指定した出力形式で記載

**重要**: 
- 検出対象パターンと変換対象パターンは一致する
- 検出対象と出力形式は異なる場合がある（例: ダミー文字 "x" で検出 → 丸数字で出力）
- 先頭数字部分は指定した形式（複数指定可能）に含まれる場合のみ削除

### UI要件

#### 入力エリア
- TSV/CSVデータを貼り付ける入力欄
- 区切り文字の自動判別
- クリアボタン

#### 設定エリア
1. **検出対象パターン選択**（複数選択可、デフォルト: 丸数字とダミー文字）
   - ☑ 丸数字 ①②③...
   - ☑ ダミー文字（デフォルト: x）
   - ☐ 数字ドット 1. 2. 3...（後で追加）
   - ☐ 括弧数字 (1) (2) (3)...（後で追加）

2. **ダミー文字入力欄**
   - ダミー文字選択肢の右に配置
   - デフォルト値: "x"

3. **出力形式選択**（単一選択）
   - ○ 丸数字 ①②③...
   - ○ 数字ドット 1. 2. 3...
   - ○ 括弧数字 (1) (2) (3)...

4. **出力区切り文字選択**
   - ○ TSV
   - ○ CSV

#### 出力エリア
- 変換結果表示
- コピーボタン
- ダウンロードボタン

### レイアウト設計
- 固定長変換ページとは異なる構成
- 設定項目が多いため、適切なグループ化とスペーシングが必要
- 選択肢の右には具体例を示す（「括弧」「例」などの表記は不要）
  - 例: `丸数字 ①②③...`

### 技術的考慮事項
- TDDで実装
- テストカバレッジを十分に確保
- Pinia での状態管理（設定の永続化）
- バリデーション: 不正な入力への対応

## 実装フェーズ

### Phase 1: 基本機能
- 丸数字とダミー文字の検出・変換
- TSV/CSV自動判別
- 基本的なUI

### Phase 2: 拡張機能
- 追加の検出パターン（数字ドット、括弧数字など）
- 全角数字対応
- エラーハンドリング強化

### Phase 3: UX改善
- プレビュー機能
- 一括設定リセット
- 設定のインポート/エクスポート
